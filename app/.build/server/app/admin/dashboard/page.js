(()=>{var e={};e.id=427,e.ids=[427],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6784:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(5507),s(8932),s(1363);var t=s(6576),l=s(2007),r=s(1818),i=s.n(r),d=s(8897),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(a,n);let c=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5507)),"/home/ubuntu/pousada-juliana/app/app/admin/dashboard/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8932)),"/home/ubuntu/pousada-juliana/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,1363,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/pousada-juliana/app/app/admin/dashboard/page.tsx"],x="/admin/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5730:(e,a,s)=>{Promise.resolve().then(s.bind(s,6312))},7133:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,4114,23)),Promise.resolve().then(s.t.bind(s,8866,23)),Promise.resolve().then(s.t.bind(s,1324,23)),Promise.resolve().then(s.t.bind(s,3567,23)),Promise.resolve().then(s.t.bind(s,5996,23)),Promise.resolve().then(s.t.bind(s,50,23))},9312:()=>{},6312:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(2901),l=s(4383),r=s(891),i=s(6843),d=s(1945);let n=(0,d.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var c=s(1046);let o=(0,d.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var x=s(1334),m=s(8846),h=s(2910),p=s(4374),u=s(2392);function y(){let e=(0,p.useRouter)(),[a,s]=(0,l.useState)(null),[d,y]=(0,l.useState)([]),[j,g]=(0,l.useState)([]),[b,N]=(0,l.useState)(""),[v,f]=(0,l.useState)(null),[w,k]=(0,l.useState)(!0),[P,S]=(0,l.useState)(!1),E=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e.push("/admin")}catch(e){console.error("Erro no logout:",e)}},C=async()=>{S(!0);try{let e=await fetch("/api/guests/export");if(e.ok){let a=await e.blob(),s=window.URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download=`hospedes-pousada-juliana-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s),document.body.removeChild(t)}else alert("Erro ao exportar dados")}catch(e){console.error("Erro na exporta\xe7\xe3o:",e),alert("Erro ao exportar dados")}finally{S(!1)}},Z=e=>new Date(e).toLocaleDateString("pt-BR"),_=e=>e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),M=e=>e.replace(/(\d{2})(\d{4,5})(\d{4})/,"($1) $2-$3");return w?t.jsx("div",{className:"text-center py-12",children:t.jsx("div",{className:"text-lg text-gray-600",children:"Carregando..."})}):(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-800",children:[t.jsx(i.Z,{className:"inline-block mr-3 h-8 w-8 text-red-600"}),"Dashboard Administrativo"]}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:["Bem-vindo, ",a?.login]})]}),(0,t.jsxs)("button",{onClick:E,className:"flex items-center space-x-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:[t.jsx(n,{className:"h-4 w-4"}),t.jsx("span",{children:"Sair"})]})]}),(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid md:grid-cols-3 gap-6",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Total de H\xf3spedes"}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:d.length})]}),t.jsx(i.Z,{className:"h-8 w-8 text-blue-600"})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Resultados da Busca"}),t.jsx("p",{className:"text-2xl font-bold text-gray-800",children:j.length})]}),t.jsx(c.Z,{className:"h-8 w-8 text-green-600"})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("button",{onClick:C,disabled:P,className:"w-full flex items-center justify-center space-x-2 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-semibold",children:[t.jsx(o,{className:"h-4 w-4"}),t.jsx("span",{children:P?"Exportando...":"Exportar CSV"})]})})]}),t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-md p-6",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx(c.Z,{className:"h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou CPF...",value:b,onChange:e=>N(e.target.value),className:"flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none"})]})}),(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-md overflow-hidden",children:[t.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["Lista de H\xf3spedes (",j.length,")"]})}),(0,t.jsxs)("div",{className:"overflow-x-auto",children:[(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"H\xf3spede"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contato"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xdaLTIMA ESTADIA"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cadastro"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map((e,a)=>(0,t.jsxs)(r.E.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*a},className:"hover:bg-gray-50 transition-colors",children:[t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.nomeCompleto}),t.jsx("div",{className:"text-sm text-gray-500",children:_(e.cpf)})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-sm text-gray-900",children:e.email}),t.jsx("div",{className:"text-sm text-gray-500",children:M(e.telefone)})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("div",{children:e.lastStay?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-sm text-gray-900",children:[Z(e.lastStay.dataEntrada)," a ",Z(e.lastStay.dataSaida)]}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Status: ",e.lastStay.status," â€¢ Total: ",e.totalStays," estadia",1!==e.totalStays?"s":""]})]}):(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"Nenhuma estadia registrada"}),(0,t.jsxs)("div",{className:"text-sm text-gray-400",children:["Nascimento: ",Z(e.dataNascimento)]})]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Z(e.dataCadastro)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>f(e),className:"text-blue-600 hover:text-blue-900 p-1",title:"Ver detalhes",children:t.jsx(x.Z,{className:"h-4 w-4"})}),t.jsx(u.default,{href:`/editar/${e.id}`,children:t.jsx("button",{className:"text-yellow-600 hover:text-yellow-900 p-1",title:"Editar",children:t.jsx(m.Z,{className:"h-4 w-4"})})}),t.jsx(u.default,{href:`/novo-checkin/${e.id}`,children:t.jsx("button",{className:"text-green-600 hover:text-green-900 p-1",title:"Novo check-in",children:t.jsx(h.Z,{className:"h-4 w-4"})})})]})})]},e.id))})]}),0===j.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(i.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-500",children:b?"Nenhum h\xf3spede encontrado para esta busca":"Nenhum h\xf3spede cadastrado"})]})]})]}),v&&t.jsx(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:()=>f(null),children:t.jsx(r.E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Detalhes do H\xf3spede"}),t.jsx("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nome Completo"}),t.jsx("p",{className:"text-gray-800 font-semibold",children:v.nomeCompleto})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"CPF"}),t.jsx("p",{className:"text-gray-800",children:_(v.cpf)})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Email"}),t.jsx("p",{className:"text-gray-800",children:v.email})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Telefone"}),t.jsx("p",{className:"text-gray-800",children:M(v.telefone)})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Data de Nascimento"}),t.jsx("p",{className:"text-gray-800",children:Z(v.dataNascimento)})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Data de Cadastro"}),t.jsx("p",{className:"text-gray-800",children:Z(v.dataCadastro)})]})]}),(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Hist\xf3rico de Estadias (",v.totalStays,")"]}),v.stays.length>0?t.jsx("div",{className:"space-y-3 max-h-40 overflow-y-auto",children:v.stays.map((e,a)=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-800",children:["Estadia #",v.stays.length-a]}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${"ativo"===e.status?"bg-green-100 text-green-800":"finalizado"===e.status?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:e.status})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Entrada:"}),t.jsx("p",{className:"font-medium text-green-600",children:Z(e.dataEntrada)})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-gray-600",children:"Sa\xedda:"}),t.jsx("p",{className:"font-medium text-red-600",children:Z(e.dataSaida)})]})]}),e.observacoes&&(0,t.jsxs)("div",{className:"mt-2",children:[t.jsx("span",{className:"text-gray-600 text-sm",children:"Observa\xe7\xf5es:"}),t.jsx("p",{className:"text-sm text-gray-800",children:e.observacoes})]})]},e.id))}):t.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma estadia registrada"})]}),(0,t.jsxs)("div",{className:"flex space-x-4 pt-6 border-t",children:[t.jsx(u.default,{href:`/editar/${v.id}`,className:"flex-1",children:(0,t.jsxs)("button",{className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold flex items-center justify-center space-x-2",children:[t.jsx(m.Z,{className:"h-4 w-4"}),t.jsx("span",{children:"Editar Dados"})]})}),t.jsx(u.default,{href:`/novo-checkin/${v.id}`,className:"flex-1",children:(0,t.jsxs)("button",{className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition-colors font-semibold flex items-center justify-center space-x-2",children:[t.jsx(h.Z,{className:"h-4 w-4"}),t.jsx("span",{children:"Novo Check-in"})]})})]})]})]})})})]})}},1334:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(1945).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8846:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(1945).Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},1046:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(1945).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2910:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(1945).Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},6843:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(1945).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},4374:(e,a,s)=>{"use strict";var t=s(5229);s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(a,{useSearchParams:function(){return t.useSearchParams}})},5507:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(8895).createProxy)(String.raw`/home/ubuntu/pousada-juliana/app/app/admin/dashboard/page.tsx#default`)},8932:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>d,metadata:()=>i});var t=s(3537),l=s(7416),r=s.n(l);s(6148);let i={title:"Pousada Juliana - Sistema de H\xf3spedes",description:"Sistema de cadastro e consulta de h\xf3spedes da Pousada Juliana na Ilha Grande"};function d({children:e}){return t.jsx("html",{lang:"pt-BR",children:t.jsx("body",{className:r().className,children:(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50",children:[t.jsx("header",{className:"bg-white/80 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-50",children:t.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-green-500 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white font-bold text-lg",children:"PJ"})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Pousada Juliana"}),t.jsx("p",{className:"text-sm text-gray-600",children:"Ilha Grande"})]})]}),(0,t.jsxs)("nav",{className:"hidden md:flex space-x-4",children:[t.jsx("a",{href:"/",className:"text-gray-600 hover:text-blue-600 px-3 py-2 rounded-lg transition-colors",children:"In\xedcio"}),t.jsx("a",{href:"/admin",className:"text-gray-600 hover:text-blue-600 px-3 py-2 rounded-lg transition-colors",children:"\xc1rea Admin"})]})]})})}),t.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8",children:e})]})})})}},6148:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[372,464,365,392],()=>s(6784));module.exports=t})();